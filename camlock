-- Love2D kullanarak basit bir key sistemi ve GUI

local validKeys = {}

-- Key oluşturma fonksiyonu
local function generateKey(length)
    local chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789'
    local key = ''
    for i = 1, length do
        local index = math.random(1, #chars)
        key = key .. chars:sub(index, index)
    end
    return key
end

-- Yeni key ekleme fonksiyonu
local function addKey(newKey)
    table.insert(validKeys, newKey)
end

-- Key doğrulama fonksiyonu
local function isValidKey(key)
    for _, v in ipairs(validKeys) do
        if v == key then
            return true
        end
    end
    return false
end

-- Love2D yükleme fonksiyonu
function love.load()
    math.randomseed(os.time())
    currentKey = generateKey(16)
    addKey(currentKey)
    inputKey = ""
    message = ""
    buttonX, buttonY, buttonW, buttonH = 10, 80, 200, 40
end

-- Love2D güncelleme fonksiyonu
function love.update(dt)
    -- Her 10 saniyede bir yeni key oluşturma
    if love.timer.getTime() % 10 < 0.1 then
        currentKey = generateKey(16)
        addKey(currentKey)
    end
end

-- Love2D çizim fonksiyonu
function love.draw()
    love.graphics.print("Current Key: " .. currentKey, 10, 10)
    love.graphics.print("Enter Key:", 10, 40)
    love.graphics.print(inputKey, 10, 60)
    love.graphics.rectangle("line", buttonX, buttonY, buttonW, buttonH)
    love.graphics.print("Get Key Link", buttonX + 10, buttonY + 10)
    love.graphics.print(message, 10, 140)
end

-- Kullanıcı girişini yönetme
function love.textinput(t)
    inputKey = inputKey .. t
end

function love.keypressed(key)
    if key == "return" then
        if isValidKey(inputKey) then
            message = "Valid Key!"
        else
            message = "Invalid Key!"
        end
        inputKey = ""
    elseif key == "backspace" then
        inputKey = inputKey:sub(1, -2)
    end
end

-- Mouse basma olayını yönetme
function love.mousepressed(x, y, button, istouch, presses)
    if button == 1 then
        if x >= buttonX and x <= buttonX + buttonW and y >= buttonY and y <= buttonY + buttonH then
            local keyLink = "https://example.com/getkey"
            love.system.setClipboardText(keyLink)
            message = "Key link copied to clipboard!"
        end
    end
end
